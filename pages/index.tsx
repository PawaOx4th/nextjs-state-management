import { observer } from 'mobx-react-lite';
import type {
  GetServerSideProps,
  InferGetServerSidePropsType,
  NextPage
} from 'next';
import Head from 'next/head';
import React, { useEffect } from 'react';
import Content from '../src/feature/todo/components/Content';
import { ITodo } from '../src/feature/todo/ITodo';
import todoStore from '../src/feature/todo/TodoStore';
import { fetchTodo } from '../src/services/todoServices';

export const getServerSideProps: GetServerSideProps<{
  listTodo: ITodo[];
}> = async () => {
  const result = await fetchTodo();
  todoStore.setListTodo(result);
  return {
    props: {
      listTodo: todoStore.listTodo
    }
  };
};

const Home: NextPage<
  InferGetServerSidePropsType<typeof getServerSideProps>
> = ({ listTodo }) => {
  return (
    <div>
      <Head>
        <title>NextJS: State menegement with Mobx </title>
        <meta
          name="description"
          content=" Generated by create next app"
        />
        <link
          rel="icon"
          href="/favicon.ico"
        />
      </Head>

      <main
        className="flex min-h-screen w-full flex-col items-center justify-center border-2 font-inter text-2xl font-semibold transition-all hover:border"
        spellCheck={true}
      >
        NextJs + State management. with (mobx) âš¡
        <hr />
        <div className="mt-3 h-[0.5px] w-7/12 bg-gray-600"></div>
        <Content />
      </main>
    </div>
  );
};

export default Home;
